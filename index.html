<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="Vor8RRrnspkvadF53CEOqEhPiIxFDR4D2ljU-dk5LVE" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/images/logo/logo.svg">
    <link rel="apple-touch-icon" href="assets/images/logo/logo.svg">
    
    <!-- SEO Meta Tags -->
    <title>CASARO SOFA | Sofa Gấp Gọn Đa Năng - Sofa Gấp 3 Cao Cấp Giá Tốt</title>
    <meta name="description" content="CASARO SOFA - Chuyên sofa gấp gọn, sofa gấp 3, sofa đa năng cao cấp. Thiết kế thông minh, tiết kiệm không gian, chất liệu bền đẹp. Giao hàng toàn quốc, bảo hành 6 tháng.">
    <meta name="keywords" content="sofa gấp gọn, sofa gấp 3, sofa đa năng, casaro sofa, sofa bed, sofa giường, sofa thông minh, sofa cao cấp, sofa giá rẻ, sofa mini, sofa căn hộ nhỏ">
    <meta name="author" content="CASARO SOFA">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://casarosofa.id.vn/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://casarosofa.id.vn/">
    <meta property="og:title" content="CASARO SOFA | Sofa Gấp Gọn Đa Năng - Sofa Gấp 3 Cao Cấp">
    <meta property="og:description" content="Sofa gấp gọn đa năng cao cấp, thiết kế thông minh tiết kiệm không gian. Chất liệu bền đẹp, giá tốt nhất thị trường.">
    <meta property="og:image" content="https://casarosofa.id.vn/assets/images/sofagapgon/1.1.jpg">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:site_name" content="CASARO SOFA">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CASARO SOFA | Sofa Gấp Gọn Đa Năng - Sofa Gấp 3 Cao Cấp">
    <meta name="twitter:description" content="Sofa gấp gọn đa năng cao cấp, thiết kế thông minh tiết kiệm không gian.">
    <meta name="twitter:image" content="https://casarosofa.id.vn/assets/images/sofagapgon/1.1.jpg">
    
    <!-- Additional SEO -->
    <meta name="geo.region" content="VN">
    <meta name="geo.placename" content="Vietnam">
    <meta name="language" content="Vietnamese">
    
    <!-- Critical CSS - Inline for faster FCP -->
    <style>
    *,::after,::before{box-sizing:border-box;margin:0;padding:0}html{font-size:16px}body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;color:#343a40;background:#fff}.luxury-header{position:fixed;top:0;left:0;right:0;z-index:1000;padding:1.5rem 0;background:rgba(10,25,47,.85);backdrop-filter:blur(20px)}.header-container{max-width:1400px;margin:0 auto;padding:0 2rem;display:flex;align-items:center;justify-content:space-between}.logo-img{height:45px;width:auto}.main-image{background:#f8f9fa;aspect-ratio:4/3;border-radius:8px}.main-image img{width:100%;height:100%;object-fit:cover}.product-title{font-size:1.5rem;margin-bottom:1rem}.container{max-width:1400px;margin:0 auto;padding:0 1rem}.hero-banner{width:100%;margin-top:77px}.hero-banner-img{width:100%;height:auto;display:block}
    </style>
    
    <!-- Google Fonts - Deferred loading (non-blocking) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&subset=vietnamese&display=swap" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&subset=vietnamese&display=swap"></noscript>
    
    <link rel="stylesheet" href="style.min.css">
    
    <!-- Structured Data - Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "CASARO SOFA",
        "url": "https://casarosofa.id.vn",
        "logo": "https://casarosofa.id.vn/assets/images/logo/logo.svg",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+84-1900-9147",
            "contactType": "customer service",
            "availableLanguage": "Vietnamese"
        }
    }
    </script>
    
    <!-- Structured Data - Product -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Product",
        "name": "Sofa Gấp Gọn Đa Năng CASARO",
        "image": "https://casarosofa.id.vn/assets/images/sofagapgon/1.1.jpg",
        "description": "Sofa gấp gọn đa năng cao cấp, chất liệu vải cao cấp, khung sườn chắc chắn, thiết kế thông minh tiết kiệm diện tích. Phù hợp mọi không gian nhà ở.",
        "brand": {
            "@type": "Brand",
            "name": "CASARO SOFA"
        },
        "offers": {
            "@type": "AggregateOffer",
            "lowPrice": "1299000",
            "highPrice": "1999000",
            "priceCurrency": "VND",
            "availability": "https://schema.org/InStock",
            "seller": {
                "@type": "Organization",
                "name": "CASARO SOFA"
            }
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "256"
        }
    }
    </script>
    
    <!-- Structured Data - LocalBusiness -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FurnitureStore",
        "name": "CASARO SOFA",
        "image": "https://casarosofa.id.vn/assets/images/logo/logo.svg",
        "telephone": "1900-9147",
        "url": "https://casarosofa.id.vn",
        "priceRange": "$$",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "VN"
        }
    }
    </script>
    
    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Trang Chủ",
                "item": "https://casarosofa.id.vn/"
            }
        ]
    }
    </script>
    
    <!-- Preload LCP Image (Banner) for faster loading -->
    <link rel="preload" as="image" href="assets/images/banner/banner.jpg" fetchpriority="high">
    
    <!-- META PIXEL - Replace YOUR_PIXEL_ID with your actual Pixel ID -->
    <!-- 
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', 'YOUR_PIXEL_ID');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"/></noscript>
    -->
    
    <!-- GOOGLE TAG / GA4 - Replace YOUR_GA4_ID with your actual GA4 ID (e.g., G-XXXXXXXXXX) -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_GA4_ID"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'YOUR_GA4_ID');
    </script>
    -->
    
    <!-- UTM TRACKING & A/B TESTING HELPER -->
    <script>
    (function(){
        // Store UTM params in sessionStorage for conversion tracking
        var params = new URLSearchParams(window.location.search);
        var utmKeys = ['utm_source','utm_medium','utm_campaign','utm_term','utm_content','fbclid','gclid'];
        utmKeys.forEach(function(key){
            var val = params.get(key);
            if(val) sessionStorage.setItem(key, val);
        });
        // A/B Test variant tracking
        var variant = params.get('variant') || sessionStorage.getItem('ab_variant') || 'control';
        sessionStorage.setItem('ab_variant', variant);
        document.documentElement.setAttribute('data-variant', variant);
    })();
    </script>
</head>
<body>
    <!-- LUXURY HEADER -->
    <header class="luxury-header" id="luxuryHeader">
        <div class="header-container">
            <!-- Logo -->
            <a href="#" class="logo">
                <img src="assets/images/logo/logo.svg" alt="CASARO SOFA" class="logo-img" width="120" height="45">
            </a>
            
            <!-- Navigation -->
            <nav class="main-nav" id="mainNav">
                <div class="nav-overlay" id="navOverlay"></div>
                <div class="nav-content">
                    <button type="button" class="nav-close" id="navClose" aria-label="Đóng menu">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                    <ul class="nav-list">
                        <li><a href="index.html" class="nav-link active">Trang Chủ</a></li>
                        <li><a href="products.html" class="nav-link">Sản Phẩm</a></li>
                    </ul>
                </div>
            </nav>
            
            <!-- Header Actions -->
            <div class="header-actions">
                <!-- Mobile Menu Toggle -->
                <button class="menu-toggle" id="menuToggle" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main id="main-content">

    <!-- HERO BANNER -->
    <section class="hero-banner">
        <img src="assets/images/banner/banner.jpg" alt="CASARO SOFA - Sofa Gấp Gọn Đa Năng" width="1920" height="600" fetchpriority="high" class="hero-banner-img">
    </section>

    <!-- PRODUCT DETAIL SECTION -->
    <section class="product-detail" id="product-detail">
        <div class="container">
            <!-- SEO H1 - Hidden visually but accessible -->
            <h1 class="seo-title">Sofa Gấp Gọn Đa Năng CASARO - Sofa Gấp 3 Cao Cấp</h1>
            
            <div class="product-wrapper">
                <!-- Left: Product Gallery -->
                <div class="product-gallery reveal" data-delay="0">
                    <div class="main-image">
                        <img id="mainImg" src="assets/images/sofagapgon/1.1.jpg" alt="Sofa Gấp Gọn Đa Năng CASARO - Màu Xám" width="800" height="600" loading="lazy">
                    </div>
                    <div class="variant-thumbnails" id="variantThumbs">
                        <img src="assets/images/sofagapgon/1.1.jpg" alt="Sofa Gấp Gọn - Góc 1" class="thumb active" width="150" height="113" loading="lazy">
                        <img src="assets/images/sofagapgon/1.2.jpg" alt="Sofa Gấp Gọn - Góc 2" class="thumb" width="150" height="113" loading="lazy">
                        <img src="assets/images/sofagapgon/1.3.jpg" alt="Sofa Gấp Gọn - Góc 3" class="thumb" width="150" height="113" loading="lazy">
                        <img src="assets/images/sofagapgon/1.4.jpg" alt="Sofa Gấp Gọn - Góc 4" class="thumb" width="150" height="113" loading="lazy">
                    </div>
                </div>
                
                <!-- Right: Product Info -->
                <div class="product-info">
                    <h2 class="product-title reveal" data-delay="100">Sofa Gấp Gọn Đa Năng</h2>
                    
                    <!-- Color Selection - Mobile shows near image -->
                    <div class="product-option option-color reveal" data-delay="300">
                        <p class="option-label">Màu sắc: <span id="colorName">Xám</span></p>
                        <div class="color-options">
                            <button type="button" class="color-swatch active" data-color="1" data-name="Xám" style="background-color: #878377;" title="Xám"></button>
                            <button type="button" class="color-swatch" data-color="2" data-name="Đen" style="background-color: #121212;" title="Đen"></button>
                            <button type="button" class="color-swatch" data-color="3" data-name="Trắng kem" style="background-color: #fff6da;" title="Trắng kem"></button>
                            <button type="button" class="color-swatch" data-color="4" data-name="Đỏ" style="background-color: #901923;" title="Đỏ"></button>
                            <button type="button" class="color-swatch" data-color="5" data-name="Nâu" style="background-color: #5e4230;" title="Nâu"></button>
                            <button type="button" class="color-swatch" data-color="6" data-name="Xanh navy" style="background-color: #394668;" title="Xanh navy"></button>
                            <button type="button" class="color-swatch" data-color="7" data-name="Xanh lá đậm" style="background-color: #265c51;" title="Xanh lá đậm"></button>
                            <button type="button" class="color-swatch" data-color="8" data-name="Xanh ngọc" style="background-color: #0f9b8e;" title="Xanh ngọc"></button>
                        </div>
                    </div>
                    
                    <p class="product-desc reveal" data-delay="150">Chất liệu vải cao cấp, khung sườn chắc chắn chịu lực, thiết kế thông minh tiết kiệm diện tích. Phù hợp mọi không gian nhà ở sang trọng.</p>
                    
                    <!-- Price -->
                    <div class="product-price reveal" data-delay="200">
                        <span class="price-original" id="priceOriginal">1.689.000đ</span>
                        <span class="price-sale" id="priceSale">1.299.000đ</span>
                        <span class="price-badge">Giảm 23%</span>
                    </div>
                    
                    <!-- Size Selection -->
                    <div class="product-option option-size reveal" data-delay="250">
                        <p class="option-label">Kích thước:</p>
                        <div class="size-options" id="sizeOptions">
                            <button type="button" class="size-btn active" data-size="1" data-original="1.689.000" data-sale="1.299.000">80cm x 1m85</button>
                            <button type="button" class="size-btn" data-size="2" data-original="1.949.000" data-sale="1.499.000">1m x 1m85</button>
                            <button type="button" class="size-btn" data-size="3" data-original="2.209.000" data-sale="1.699.000">1m2 x 1m85</button>
                            <button type="button" class="size-btn" data-size="4" data-original="2.599.000" data-sale="1.999.000">1m5 x 1m85</button>
                        </div>
                    </div>
                    
                    <!-- Legs Selection -->
                    <div class="product-option option-legs reveal" data-delay="275">
                        <p class="option-label">Số chân:</p>
                        <div class="legs-options" id="legsOptions">
                            <button type="button" class="legs-btn active" data-legs="4" data-extra="0">4 chân</button>
                            <button type="button" class="legs-btn" data-legs="6" data-extra="100000">6 chân (+100.000đ)</button>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="product-actions reveal" data-delay="350">
                        <button type="button" class="btn-primary btn-order-now" id="orderNowBtn">ĐẶT HÀNG NGAY</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- BENEFITS SECTION - ZIG-ZAG LAYOUT -->
    <section class="benefits-luxury">
        <div class="container">
            <div class="benefits-header reveal" data-delay="0">
                <span class="section-label">LỢI ÍCH</span>
                <h2 class="section-title-serif">Lợi Ích Vượt Trội</h2>
                <div class="title-underline"></div>
            </div>
            
            <!-- Benefit Row 1 -->
            <div class="benefit-row">
                <div class="benefit-image reveal" data-delay="100">
                    <img src="assets/images/sofagapgon/1.1.jpg" alt="Sofa gấp gọn tối ưu không gian" width="600" height="450" loading="lazy">
                </div>
                <div class="benefit-content reveal" data-delay="200">
                    <span class="benefit-number">01</span>
                    <h3 class="benefit-title">Tối Ưu Không Gian</h3>
                    <p class="benefit-desc">Thiết kế thông minh giúp tiết kiệm tối đa diện tích. Phù hợp hoàn hảo cho căn hộ nhỏ, studio và không gian sống hiện đại.</p>
                </div>
            </div>
            
            <!-- Benefit Row 2 - Reversed -->
            <div class="benefit-row benefit-row-reverse">
                <div class="benefit-image reveal" data-delay="100">
                    <img src="assets/images/sofagapgon/3.4.jpg" alt="Sofa đa năng ngồi êm ngủ thoải mái" width="600" height="450" loading="lazy">
                </div>
                <div class="benefit-content reveal" data-delay="200">
                    <span class="benefit-number">02</span>
                    <h3 class="benefit-title">Ngồi Êm – Ngủ Thoải Mái</h3>
                    <p class="benefit-desc">Đệm cao cấp với độ đàn hồi hoàn hảo, hỗ trợ cột sống. Mang đến trải nghiệm nghỉ ngơi tuyệt vời cho cả ngồi và nằm.</p>
                </div>
            </div>
            
            <!-- Benefit Row 3 -->
            <div class="benefit-row">
                <div class="benefit-image reveal" data-delay="100">
                    <img src="assets/images/sofagapgon/6.2.jpg" alt="Sofa gấp 3 bền bỉ êm ái" width="600" height="450" loading="lazy">
                </div>
                <div class="benefit-content reveal" data-delay="200">
                    <span class="benefit-number">03</span>
                    <h3 class="benefit-title">Bền Bỉ & Êm Ái</h3>
                    <p class="benefit-desc">Chất liệu vải cao cấp bền bỉ, thoáng mát. Trọng lượng nhẹ, dễ dàng di chuyển khi cần thay đổi không gian.</p>
                </div>
            </div>
        </div>
    </section>
    
    <script>
    (function() {
        var currentColor = '1';
        var legsExtra = 0;
        var mainImg = document.getElementById('mainImg');
        var thumbsContainer = document.getElementById('variantThumbs');
        var swatches = document.querySelectorAll('.color-swatch');
        var sizeBtns = document.querySelectorAll('.size-btn');
        var legsBtns = document.querySelectorAll('.legs-btn');
        var colorNameEl = document.getElementById('colorName');
        var priceOriginalEl = document.getElementById('priceOriginal');
        var priceSaleEl = document.getElementById('priceSale');
        
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + 'đ';
        }
        
        function updatePrice() {
            var activeSize = document.querySelector('.size-btn.active');
            if (activeSize) {
                var original = parseInt(activeSize.dataset.original.replace(/\./g, '')) + legsExtra;
                var sale = parseInt(activeSize.dataset.sale.replace(/\./g, '')) + legsExtra;
                priceOriginalEl.textContent = formatPrice(original);
                priceSaleEl.textContent = formatPrice(sale);
            }
        }
        
        function updateThumbnails(color) {
            thumbsContainer.innerHTML = '';
            for (var i = 1; i <= 4; i++) {
                var img = document.createElement('img');
                img.src = 'assets/images/sofagapgon/' + color + '.' + i + '.jpg';
                img.alt = 'Sofa Gấp Gọn - Góc ' + i;
                img.className = 'thumb' + (i === 1 ? ' active' : '');
                img.width = 150;
                img.height = 113;
                img.loading = 'lazy';
                thumbsContainer.appendChild(img);
            }
            mainImg.src = 'assets/images/sofagapgon/' + color + '.1.jpg';
            attachThumbEvents();
        }
        
        function attachThumbEvents() {
            var thumbs = thumbsContainer.querySelectorAll('.thumb');
            thumbs.forEach(function(thumb) {
                thumb.addEventListener('click', function() {
                    thumbs.forEach(function(t) { t.classList.remove('active'); });
                    this.classList.add('active');
                    mainImg.src = this.src;
                });
            });
        }
        
        // Color selection
        swatches.forEach(function(swatch) {
            swatch.addEventListener('click', function() {
                swatches.forEach(function(s) { s.classList.remove('active'); });
                this.classList.add('active');
                currentColor = this.dataset.color;
                colorNameEl.textContent = this.dataset.name;
                updateThumbnails(currentColor);
            });
        });
        
        // Size selection
        sizeBtns.forEach(function(btn) {
            btn.addEventListener('click', function() {
                sizeBtns.forEach(function(b) { b.classList.remove('active'); });
                this.classList.add('active');
                updatePrice();
            });
        });
        
        // Legs selection
        legsBtns.forEach(function(btn) {
            btn.addEventListener('click', function() {
                legsBtns.forEach(function(b) { b.classList.remove('active'); });
                this.classList.add('active');
                legsExtra = parseInt(this.dataset.extra);
                updatePrice();
            });
        });
        
        attachThumbEvents();
    })();
    </script>

    <!-- TRUST SECTION -->
    <section class="trust" style="display: none;">
        <!-- Hidden - replaced by trust-luxury -->
    </section>

    <!-- LEAD FORM SECTION -->
    <section class="form-section" id="form-section">
        <div class="container">
            <h2 class="reveal" data-delay="0">Đăng Ký Nhận Tư Vấn & Báo Giá Ưu Đãi</h2>
            <p class="form-subtitle reveal" data-delay="100">Để lại thông tin, chúng tôi sẽ liên hệ tư vấn ngay!</p>
            
            <p class="form-urgency reveal" data-delay="150">⏰ Ưu đãi có hạn – Đăng ký sớm để được giá tốt nhất!</p>
            
            <form name="lead-form" method="POST" data-netlify="true" class="lead-form reveal" data-delay="200" id="leadForm">
                <input type="hidden" name="form-name" value="lead-form">
                
                <div class="form-group">
                    <label for="fullname">Họ và tên *</label>
                    <input type="text" id="fullname" name="fullname" placeholder="Nhập họ và tên của bạn" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Số điện thoại *</label>
                    <input type="tel" id="phone" name="phone" placeholder="Nhập số điện thoại" required>
                </div>
                
                <div class="form-group">
                    <label for="address">Địa chỉ giao hàng *</label>
                    <input type="text" id="address" name="address" placeholder="Nhập địa chỉ của bạn" required>
                </div>
                
                <button type="submit" class="cta-button submit-btn" id="leadSubmitBtn">
                    <span class="btn-text">Gửi Thông Tin – Nhận Tư Vấn Ngay</span>
                    <span class="btn-loading-icon">
                        <svg class="spinner" viewBox="0 0 24 24" width="20" height="20">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="31.4 31.4"/>
                        </svg>
                    </span>
                </button>
            </form>
        </div>
    </section>

    <!-- LEAD FORM SUCCESS MODAL -->
    <div class="lead-success-modal" id="leadSuccessModal">
        <div class="lead-success-overlay" id="leadSuccessOverlay"></div>
        <div class="lead-success-content">
            <div class="lead-success-icon">
                <svg class="checkmark-lead" viewBox="0 0 52 52">
                    <circle class="checkmark-circle-lead" cx="26" cy="26" r="25" fill="none"/>
                    <path class="checkmark-check-lead" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            </div>
            <h2 class="lead-success-title">ĐĂNG KÝ THÀNH CÔNG!</h2>
            <p class="lead-success-message" id="leadSuccessMessage">Cảm ơn bạn đã quan tâm đến sản phẩm của Casaro Sofa.</p>
            <p class="lead-success-sub">Chúng tôi sẽ liên hệ tư vấn sớm nhất ngay hôm nay.</p>
            <div class="lead-success-contact">
                <span>Hotline hỗ trợ:</span>
                <a href="tel:19009147">1900.9147</a>
            </div>
            <button type="button" class="btn-lead-continue" id="leadSuccessContinue">Tiếp Tục Khám Phá</button>
        </div>
    </div>

    <!-- FINAL CTA SECTION -->
    <section class="final-cta">
        <div class="container">
            <h2 class="reveal" data-delay="0">Bạn Còn Thắc Mắc? Hãy Để Chúng Tôi Tư Vấn!</h2>
            <a href="#form-section" class="cta-button reveal" data-delay="200">Nhận Tư Vấn Miễn Phí</a>
        </div>
    </section>

    </main>
    <!-- END MAIN CONTENT -->

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 CASARO SOFA. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- LUXURY HEADER & HERO SCRIPTS -->
    <script>
    (function() {
        // ========================================
        // INTERSECTION OBSERVER - SCROLL REVEAL
        // ========================================
        var revealElements = document.querySelectorAll('.reveal');
        
        var revealObserver = new IntersectionObserver(function(entries, observer) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting) {
                    var el = entry.target;
                    var delay = parseInt(el.dataset.delay) || 0;
                    
                    setTimeout(function() {
                        el.classList.add('revealed');
                    }, delay);
                    
                    observer.unobserve(el);
                }
            });
        }, {
            rootMargin: '0px 0px -50px 0px',
            threshold: 0.1
        });
        
        revealElements.forEach(function(el) {
            revealObserver.observe(el);
        });
        
        // ========================================
        // HERO CONTENT REVEAL ON LOAD
        // ========================================
        window.addEventListener('load', function() {
            var heroContent = document.querySelector('.hero-content-luxury');
            var heroTagline = document.querySelector('.hero-tagline');
            var heroDesc = document.querySelector('.hero-description');
            var heroCta = document.querySelector('.hero-cta');
            var scrollIndicator = document.querySelector('.scroll-indicator');
            
            setTimeout(function() {
                if (heroTagline) heroTagline.classList.add('revealed');
            }, 800);
            
            setTimeout(function() {
                if (heroDesc) heroDesc.classList.add('revealed');
            }, 1000);
            
            setTimeout(function() {
                if (heroCta) heroCta.classList.add('revealed');
            }, 1200);
            
            setTimeout(function() {
                if (scrollIndicator) scrollIndicator.classList.add('revealed');
            }, 1500);
        });
        
        // ========================================
        // HEADER SCROLL EFFECT
        // ========================================
        var header = document.getElementById('luxuryHeader');
        var lastScroll = 0;
        
        window.addEventListener('scroll', function() {
            var currentScroll = window.pageYOffset;
            
            if (currentScroll > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
            
            lastScroll = currentScroll;
        });
        
        // ========================================
        // MOBILE MENU TOGGLE
        // ========================================
        var menuToggle = document.getElementById('menuToggle');
        var mainNav = document.getElementById('mainNav');
        var navClose = document.getElementById('navClose');
        var navOverlay = document.getElementById('navOverlay');
        
        function closeMenu() {
            menuToggle.classList.remove('active');
            mainNav.classList.remove('active');
            document.body.classList.remove('menu-open');
        }
        
        menuToggle.addEventListener('click', function() {
            menuToggle.classList.toggle('active');
            mainNav.classList.toggle('active');
            document.body.classList.toggle('menu-open');
        });
        
        navClose.addEventListener('click', closeMenu);
        navOverlay.addEventListener('click', closeMenu);
        
        // Close menu when clicking nav links
        var navLinks = mainNav.querySelectorAll('.nav-link');
        navLinks.forEach(function(link) {
            link.addEventListener('click', closeMenu);
        });
    })();
    </script>

    <!-- ========================================
         CART SIDEBAR
         ======================================== -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-sidebar-overlay" id="cartOverlay"></div>
        <div class="cart-sidebar-content">
            <div class="cart-header">
                <h3>Giỏ Hàng Của Bạn</h3>
                <button type="button" class="cart-close" id="cartClose" aria-label="Đóng giỏ hàng">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="cart-body" id="cartBody">
                <!-- Cart items will be rendered here -->
            </div>
            <div class="cart-footer" id="cartFooter">
                <div class="cart-total">
                    <span>Tạm tính:</span>
                    <span class="cart-total-price" id="cartTotalPrice">0đ</span>
                </div>
                <button type="button" class="btn-checkout" id="checkoutBtn">ĐẶT HÀNG</button>
            </div>
            <!-- Empty State -->
            <div class="cart-empty" id="cartEmpty">
                <svg class="cart-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                    <line x1="3" y1="6" x2="21" y2="6"/>
                    <path d="M16 10a4 4 0 0 1-8 0"/>
                </svg>
                <p>Chưa có sản phẩm nào</p>
                <button type="button" class="btn-continue-shopping" id="continueShopping">Tiếp tục mua sắm</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         ORDER MODAL (CHECKOUT FORM)
         ======================================== -->
    <div class="order-modal" id="orderModal">
        <div class="order-modal-overlay" id="orderModalOverlay"></div>
        <div class="order-modal-content">
            <button type="button" class="modal-close" id="orderModalClose" aria-label="Đóng">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
            <div class="order-modal-header">
                <span class="modal-label">CASARO SOFA</span>
                <h2>Thông Tin Đặt Hàng</h2>
            </div>
            <form class="order-form" id="orderForm">
                <div class="form-field">
                    <input type="text" id="orderName" name="name" required placeholder=" ">
                    <label for="orderName">Họ và tên</label>
                    <span class="field-line"></span>
                </div>
                <div class="form-field">
                    <input type="tel" id="orderPhone" name="phone" required placeholder=" ">
                    <label for="orderPhone">Số điện thoại</label>
                    <span class="field-line"></span>
                </div>
                <div class="form-field">
                    <input type="text" id="orderAddress" name="address" required placeholder=" ">
                    <label for="orderAddress">Địa chỉ nhận hàng chi tiết</label>
                    <span class="field-line"></span>
                </div>
                <!-- Order Summary -->
                <div class="order-summary" id="orderSummary">
                    <!-- Will be populated by JS -->
                </div>
                <button type="submit" class="btn-submit-order" id="submitOrderBtn">
                    <span class="btn-text">HOÀN TẤT ĐẶT HÀNG</span>
                    <span class="btn-loading">
                        <svg class="spinner" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="31.4 31.4"/>
                        </svg>
                    </span>
                </button>
            </form>
        </div>
    </div>

    <!-- ========================================
         SUCCESS MODAL
         ======================================== -->
    <div class="success-modal" id="successModal">
        <div class="success-modal-overlay" id="successModalOverlay"></div>
        <div class="success-modal-content">
            <div class="success-icon">
                <svg class="checkmark" viewBox="0 0 52 52">
                    <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            </div>
            <h2 class="success-title">ĐẶT HÀNG THÀNH CÔNG</h2>
            <p class="success-message" id="successMessage">Cảm ơn bạn. Casaro Sofa sẽ liên hệ lại với bạn ngay để xác nhận đơn hàng.</p>
            <button type="button" class="btn-continue" id="successContinue">Tiếp tục mua sắm</button>
        </div>
    </div>

    <!-- ========================================
         CART & CHECKOUT JAVASCRIPT
         ======================================== -->
    <script>
    (function() {
        // ========================================
        // CART STATE
        // ========================================
        var cart = JSON.parse(localStorage.getItem('casaroCart')) || [];
        var currentProduct = {
            name: 'Sofa Gấp Gọn Đa Năng',
            size: '80cm x 1m85',
            color: 'Xám',
            colorCode: '1',
            legs: 4,
            legsExtra: 0,
            originalPrice: 1689000,
            salePrice: 1299000,
            image: 'assets/images/sofagapgon/1.1.jpg'
        };
        
        function saveCart() {
            localStorage.setItem('casaroCart', JSON.stringify(cart));
        }

        // DOM Elements
        var cartSidebar = document.getElementById('cartSidebar');
        var cartOverlay = document.getElementById('cartOverlay');
        var cartClose = document.getElementById('cartClose');
        var cartBody = document.getElementById('cartBody');
        var cartFooter = document.getElementById('cartFooter');
        var cartEmpty = document.getElementById('cartEmpty');
        var cartTotalPrice = document.getElementById('cartTotalPrice');
        var orderNowBtn = document.getElementById('orderNowBtn');
        var checkoutBtn = document.getElementById('checkoutBtn');
        var continueShopping = document.getElementById('continueShopping');

        var orderModal = document.getElementById('orderModal');
        var orderModalOverlay = document.getElementById('orderModalOverlay');
        var orderModalClose = document.getElementById('orderModalClose');
        var orderForm = document.getElementById('orderForm');
        var orderSummary = document.getElementById('orderSummary');
        var submitOrderBtn = document.getElementById('submitOrderBtn');

        var successModal = document.getElementById('successModal');
        var successModalOverlay = document.getElementById('successModalOverlay');
        var successMessage = document.getElementById('successMessage');
        var successContinue = document.getElementById('successContinue');

        // ========================================
        // UTILITY FUNCTIONS
        // ========================================
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + 'đ';
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).slice(2);
        }

        // ========================================
        // UPDATE CURRENT PRODUCT FROM SELECTIONS
        // ========================================
        function updateCurrentProduct() {
            var activeSize = document.querySelector('.size-btn.active');
            var activeColor = document.querySelector('.color-swatch.active');
            var activeLegs = document.querySelector('.legs-btn.active');
            
            if (activeSize) {
                currentProduct.size = activeSize.textContent;
                currentProduct.originalPrice = parseInt(activeSize.dataset.original.replace(/\./g, ''));
                currentProduct.salePrice = parseInt(activeSize.dataset.sale.replace(/\./g, ''));
            }
            
            if (activeColor) {
                currentProduct.color = activeColor.dataset.name;
                currentProduct.colorCode = activeColor.dataset.color;
                currentProduct.image = 'assets/images/sofagapgon/' + activeColor.dataset.color + '.1.jpg';
            }
            
            if (activeLegs) {
                currentProduct.legs = parseInt(activeLegs.dataset.legs);
                currentProduct.legsExtra = parseInt(activeLegs.dataset.extra);
                currentProduct.originalPrice += currentProduct.legsExtra;
                currentProduct.salePrice += currentProduct.legsExtra;
            }
        }

        // ========================================
        // CART FUNCTIONS
        // ========================================
        function removeFromCart(id) {
            cart = cart.filter(function(item) {
                return item.id !== id;
            });
            saveCart();
            updateCartUI();
        }

        function clearCart() {
            cart = [];
            saveCart();
            updateCartUI();
        }

        function getCartTotal() {
            return cart.reduce(function(total, item) {
                return total + (item.salePrice * item.quantity);
            }, 0);
        }

        function updateCartUI() {
            // Show/hide empty state
            if (cart.length === 0) {
                cartEmpty.style.display = 'flex';
                cartBody.style.display = 'none';
                cartFooter.style.display = 'none';
            } else {
                cartEmpty.style.display = 'none';
                cartBody.style.display = 'block';
                cartFooter.style.display = 'block';
                renderCartItems();
            }

            // Update total
            cartTotalPrice.textContent = formatPrice(getCartTotal());
        }

        function renderCartItems() {
            cartBody.innerHTML = cart.map(function(item) {
                return '<div class="cart-item" data-id="' + item.id + '">' +
                    '<img src="' + item.image + '" alt="' + item.name + '" class="cart-item-img">' +
                    '<div class="cart-item-info">' +
                        '<h4 class="cart-item-name">' + item.name + '</h4>' +
                        '<p class="cart-item-variant">' + item.color + ' / ' + item.size + (item.legs ? ' / ' + item.legs + ' chân' : '') + '</p>' +
                        '<p class="cart-item-price">' + formatPrice(item.salePrice) + '</p>' +
                    '</div>' +
                    '<button type="button" class="cart-item-remove" data-id="' + item.id + '" aria-label="Xóa">' +
                        '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">' +
                            '<path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>' +
                        '</svg>' +
                    '</button>' +
                '</div>';
            }).join('');

            // Attach remove event listeners
            var removeButtons = cartBody.querySelectorAll('.cart-item-remove');
            removeButtons.forEach(function(btn) {
                btn.addEventListener('click', function() {
                    removeFromCart(this.dataset.id);
                });
            });
        }

        // ========================================
        // CART SIDEBAR CONTROLS
        // ========================================
        function closeCart() {
            cartSidebar.classList.remove('active');
            document.body.style.overflow = '';
        }

        // ========================================
        // ORDER MODAL CONTROLS
        // ========================================
        function openOrderModal(fromCart) {
            updateCurrentProduct();
            
            // Build order summary
            var items = fromCart && cart.length > 0 ? cart : [{
                name: currentProduct.name,
                size: currentProduct.size,
                color: currentProduct.color,
                salePrice: currentProduct.salePrice,
                image: currentProduct.image
            }];
            
            var total = fromCart && cart.length > 0 ? getCartTotal() : currentProduct.salePrice;
            
            orderSummary.innerHTML = '<div class="summary-title">Đơn hàng của bạn</div>' +
                items.map(function(item) {
                    return '<div class="summary-item">' +
                        '<span class="summary-item-name">' + item.name + '</span>' +
                        '<span class="summary-item-variant">' + item.color + ' / ' + item.size + (item.legs ? ' / ' + item.legs + ' chân' : '') + '</span>' +
                        '<span class="summary-item-price">' + formatPrice(item.salePrice) + '</span>' +
                    '</div>';
                }).join('') +
                '<div class="summary-total">' +
                    '<span>Tổng cộng:</span>' +
                    '<span>' + formatPrice(total) + '</span>' +
                '</div>';
            
            orderModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            closeCart();
        }

        function closeOrderModal() {
            orderModal.classList.remove('active');
            document.body.style.overflow = '';
            orderForm.reset();
            submitOrderBtn.classList.remove('loading');
        }

        // ========================================
        // SUCCESS MODAL CONTROLS
        // ========================================
        function openSuccessModal(customerName) {
            var name = customerName || 'bạn';
            successMessage.textContent = 'Cảm ơn ' + name + '. Casaro Sofa sẽ liên hệ lại với bạn ngay để xác nhận đơn hàng.';
            successModal.classList.add('active');
            
            // Track conversion for Analytics
            trackConversion('purchase', {
                value: cart.length > 0 ? getCartTotal() : currentProduct.salePrice,
                currency: 'VND'
            });
        }

        function closeSuccessModal() {
            successModal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // ========================================
        // CONVERSION TRACKING HELPER
        // ========================================
        function trackConversion(eventName, params) {
            params = params || {};
            // Add UTM data from session
            var utmKeys = ['utm_source','utm_medium','utm_campaign','utm_term','utm_content','fbclid','gclid'];
            utmKeys.forEach(function(key) {
                var val = sessionStorage.getItem(key);
                if (val) params[key] = val;
            });
            params.ab_variant = sessionStorage.getItem('ab_variant') || 'control';
            
            // Google Analytics 4
            if (typeof gtag === 'function') {
                gtag('event', eventName, params);
            }
            // Facebook Pixel
            if (typeof fbq === 'function') {
                var fbEvent = eventName === 'purchase' ? 'Purchase' : 'Lead';
                fbq('track', fbEvent, { value: params.value, currency: params.currency || 'VND' });
            }
            // Console log for debugging
            console.log('Conversion tracked:', eventName, params);
        }

        // ========================================
        // GOOGLE SHEETS API CONFIG
        // ========================================
        // THAY URL NÀY BẰNG URL TỪ GOOGLE APPS SCRIPT CỦA BẠN
        var GOOGLE_SHEET_URL = 'https://script.google.com/macros/s/AKfycbzfuNnygnAuVS-0k7eMMYqhboDKmdDlv4ur7IXrwa1JGGaNEGU6KsBI72efmq9Gbo1_TQ/exec';

        // Gửi dữ liệu đến Google Sheets
        function sendToGoogleSheet(data) {
            return fetch(GOOGLE_SHEET_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });
        }

        // ========================================
        // ORDER SUBMISSION
        // ========================================
        function submitOrder(e) {
            e.preventDefault();
            
            // Đảm bảo currentProduct có đầy đủ thông tin size và legs
            var orderItems = cart.length > 0 ? cart : [{
                name: currentProduct.name,
                color: currentProduct.color,
                size: currentProduct.size,
                legs: currentProduct.legs,
                salePrice: currentProduct.salePrice
            }];
            
            var orderData = {
                type: 'order',
                name: document.getElementById('orderName').value,
                phone: document.getElementById('orderPhone').value,
                address: document.getElementById('orderAddress').value,
                items: orderItems,
                total: cart.length > 0 ? getCartTotal() : currentProduct.salePrice
            };
            
            // Show loading state
            submitOrderBtn.classList.add('loading');
            
            // Gửi đến Google Sheets
            sendToGoogleSheet(orderData)
                .then(function() {
                    console.log('Order sent to Google Sheets:', orderData);
                    closeOrderModal();
                    openSuccessModal(orderData.name);
                    clearCart();
                })
                .catch(function(error) {
                    console.error('Error:', error);
                    // Vẫn hiển thị thành công vì mode: no-cors không trả về response
                    closeOrderModal();
                    openSuccessModal(orderData.name);
                    clearCart();
                });
        }

        // ========================================
        // EVENT LISTENERS
        // ========================================

        // Order now button
        orderNowBtn.addEventListener('click', function() {
            openOrderModal(false);
        });

        // Cart sidebar controls
        cartClose.addEventListener('click', closeCart);
        cartOverlay.addEventListener('click', closeCart);
        continueShopping.addEventListener('click', closeCart);

        // Checkout from cart
        checkoutBtn.addEventListener('click', function() {
            openOrderModal(true);
        });

        // Order modal controls
        orderModalClose.addEventListener('click', closeOrderModal);
        orderModalOverlay.addEventListener('click', closeOrderModal);
        orderForm.addEventListener('submit', submitOrder);

        // Success modal controls
        successModalOverlay.addEventListener('click', closeSuccessModal);
        successContinue.addEventListener('click', closeSuccessModal);

        // Escape key to close modals
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCart();
                closeOrderModal();
                closeSuccessModal();
            }
        });

        // Initialize cart UI
        updateCartUI();

        // ========================================
        // LEAD FORM HANDLING
        // ========================================
        var leadForm = document.getElementById('leadForm');
        var leadSubmitBtn = document.getElementById('leadSubmitBtn');
        var leadSuccessModal = document.getElementById('leadSuccessModal');
        var leadSuccessOverlay = document.getElementById('leadSuccessOverlay');
        var leadSuccessMessage = document.getElementById('leadSuccessMessage');
        var leadSuccessContinue = document.getElementById('leadSuccessContinue');

        function openLeadSuccessModal(name) {
            var customerName = name || 'bạn';
            leadSuccessMessage.textContent = 'Cảm ơn ' + customerName + ' đã quan tâm đến sản phẩm của Casaro Sofa.';
            leadSuccessModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Track lead conversion
            trackConversion('generate_lead', { lead_source: 'contact_form' });
        }

        function closeLeadSuccessModal() {
            leadSuccessModal.classList.remove('active');
            document.body.style.overflow = '';
        }

        leadForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            var formData = new FormData(leadForm);
            var customerName = formData.get('fullname');
            
            // Dữ liệu gửi đến Google Sheets
            var contactData = {
                type: 'contact',
                name: formData.get('fullname'),
                phone: formData.get('phone'),
                address: formData.get('address')
            };
            
            // Show loading
            leadSubmitBtn.classList.add('loading');
            
            // Gửi đến Google Sheets
            sendToGoogleSheet(contactData)
                .then(function() {
                    console.log('Contact sent to Google Sheets:', contactData);
                    leadSubmitBtn.classList.remove('loading');
                    leadForm.reset();
                    openLeadSuccessModal(customerName);
                })
                .catch(function(error) {
                    console.error('Error:', error);
                    leadSubmitBtn.classList.remove('loading');
                    leadForm.reset();
                    openLeadSuccessModal(customerName);
                });
            
            // Cũng gửi đến Netlify Forms (backup)
            fetch('/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: new URLSearchParams(formData).toString()
            }).catch(function(err) { console.log('Netlify backup:', err); });
        });

        leadSuccessOverlay.addEventListener('click', closeLeadSuccessModal);
        leadSuccessContinue.addEventListener('click', closeLeadSuccessModal);

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && leadSuccessModal.classList.contains('active')) {
                closeLeadSuccessModal();
            }
        });
    })();
    </script>
</body>
</html>
